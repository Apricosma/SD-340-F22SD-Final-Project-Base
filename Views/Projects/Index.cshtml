
@model IPagedList<SD_340_W22SD_Final_Project_Group6.Models.Project>
@using X.PagedList;
@using X.PagedList.Mvc.Bootstrap4.Core
@using X.PagedList.Mvc.Core;
@using X.PagedList.Mvc.Bootstrap4;

@{
	ViewData["Title"] = "Index";
	Layout = "~/Views/Shared/_Layout.cshtml";
}


<div style="display: flex; flex-direction: row; justify-content: space-between; align-items: center">
	<h1>Projects</h1>

	<p>
		<a asp-action="Create">Create New Project</a>
	</p>

	<p>
		<a asp-action="Index" asp-route-sortOrder="Priority" name="sortOrder">Priority</a>
	</p>
	<p>
		<a asp-action="Index" asp-route-sortOrder="RequiredHrs" name="sortOrder">RequiredHrs</a>
	</p>
</div>


<div>
	@foreach (var item in Model)
	{
		<div style="margin-bottom: 2rem; border: 1px solid gray; border-radius: 10px; padding: 1rem">
			<div style="display:flex; flex-direction: row; justify-content: space-between">
				<h4>Project Name: @item.ProjectName</h4>
				<h4>Created By: @item.CreatedBy</h4>
				<h4>Assigned To</h4>
				<div>
					<form>
						<input asp-action="Edit" asp-controller="Projects" asp-route-id=@item.Id type="submit" class="btn btn-dark" value="Edit" />
						<input asp-action="Delete" asp-controller="Projects" asp-route-id=@item.Id type="submit" class="btn btn-danger" value="Delete" />
					</form>
				</div>

			</div>


			<h4>Tickets</h4>


			<table class="table">
				<thead>
					<tr>
						<th>TicketName</th>
						<th>Body</th>
						<th>Required Hours</th>
						<th>Priority</th>
						<th>Settings</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var ticket in item.Tickets)
					{
						<tr>
							<td>@ticket.Title</td>
							<td>@ticket.Body</td>
							<td>@ticket.RequiredHours</td>
							<td>@ticket.TicketPriority</td>
							<td>
								@*<a asp-action="Edit" asp-controller="Tickets" asp-route-id="@ticket.Id">Edit</a>*@
								<a asp-action="Details" asp-controller="Tickets" asp-route-id="@ticket.Id">Details</a> |
								<a asp-action="Delete" asp-controller="Tickets" asp-route-id="@ticket.Id">Delete</a>
							</td>
						</tr>
					}

				</tbody>
			</table>
			<p>
				<a asp-action="Create" asp-controller="Tickets" asp-route-projId="@item.Id" name="projId">Create New Ticket</a>
			</p>
		</div>
	}
	            
</div>
		<div>
                @Html.PagedListPager(Model, page => Url.Action("Index", new { page }), Bootstrap4PagedListRenderOptions.PageNumbersOnly)
            </div>


